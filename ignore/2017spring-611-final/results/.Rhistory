exp1<-genrandom("regular-focus", 4, 0)
write(x="\\section{Part 1}\n\\begin{frame}\nPart 1\n\\end{frame}\n",file=fname,append=TRUE)
for (i in c(1:ncol(exp1))) {
block<-exp1[,i]
write(x="% Block break",file=fname,append=TRUE)
write(x=block,file=fname,append=TRUE)
}
exp2<-genrandom("ec-focus",6,0)
write(x="\\section{Part 2}\n\\begin{frame}\nPart 2\n\\end{frame}\n",file=fname,append=TRUE)
for (i in c(1:ncol(exp2))) {
block<-exp2[,i]
write(x="% Block break",file=fname,append=TRUE)
write(x=block,file=fname,append=TRUE)
}
exp3<-genrandom("mv-focus",4,0)
write(x="\\section{Part 3}\n\\begin{frame}\nPart 3\n\\end{frame}\n",file=fname,append=TRUE)
for (i in c(1:ncol(exp3))) {
block<-exp3[,i]
write(x="% Block break",file=fname,append=TRUE)
write(x=block,file=fname,append=TRUE)
}
exp4<-genrandom("pragmatics",4,1)
write(x="\\section{Part 4}\n\\begin{frame}\nPart 4\n\\end{frame}\n",file=fname,append=TRUE)
for (i in c(1:ncol(exp4))) {
block<-exp4[,i]
write(x="% Block break",file=fname,append=TRUE)
write(x=block,file=fname,append=TRUE)
}
# exp1<-genrandom("root-focus", 8, 2)
# write(x="\\section{Part 1}\n\\begin{frame}\nPart 1\n\\end{frame}\n",file=fname,append=TRUE)
# for (i in c(1:ncol(exp1))) {
#   block<-exp1[,i]
#   write(x="% Block break",file=fname,append=TRUE)
#   write(x=block,file=fname,append=TRUE)
# }
#
# exp2<-genrandom("ec-truth", 8, 2)
# write(x="\\section{Part 2}\n\\begin{frame}\nPart 2\n\\end{frame}\n",file=fname,append=TRUE)
# for (i in c(1:ncol(exp2))) {
#   block<-exp2[,i]
#   write(x="% Block break",file=fname,append=TRUE)
#   write(x=block,file=fname,append=TRUE)
# }
#
# exp3<-genrandom("ec-focus", 9, 0)
# write(x="\\section{Part 3}\n\\begin{frame}\nPart 3\n\\end{frame}\n",file=fname,append=TRUE)
# for (i in c(1:ncol(exp3))) {
#   block<-exp3[,i]
#   write(x="% Block break",file=fname,append=TRUE)
#   write(x=block,file=fname,append=TRUE) }
#
write(x="\\end{document}",file=fname,append=TRUE)
return(TRUE)
}
maketex("test")
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
fname="regular-focus"
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
if (fname=="regular-focus") {
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
# The list of lists of experimental items
# The first list of items
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
# The second list of items
lists2<-matrix(nrow=n,ncol=n)
colnames(lists2)<-paste("l",c(5:8),sep="")
tokens2<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens2[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists2[i,j]<-(
as.character(
df2[df2$type_no==i+4&df2$token_no==tokens2[i,j],]$Latex_code
)
)
# The third list of items, fillers
lists3<-matrix(nrow=2,ncol=4)
colnames(lists3)<-paste("l",c(9:12),sep="")
tokens3<-matrix(nrow=2,ncol=n,c(1:2))
for (i in c(1:2))
for (j in c(1:4))
lists3[i,j]<-(
as.character(
df3[df3$type_no==j+8&df3$token_no==tokens3[i,j],]$Latex_code
)
)
# Roll the list randomly
ran=sample(2,1)
lists3[ran,]<-roll(lists3[ran,], sample(c(1:3),1))
lists1<-lists1[,sample(colnames(lists1))]
lists2<-lists2[,sample(colnames(lists2))]
lists3<-lists3[,sample(colnames(lists3))]
lists<-rbind(lists1,lists2,lists3)
for (i in c(1:ncol(lists)))
lists[,i]<-sample(lists[,i])
} else {
lists<-matrix(nrow=n,ncol=n)
colnames(lists)<-paste("l",c(1:n),sep="")
tokens<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists[i,j]<-(
as.character(
df[df$type_no==i&df$token_no==tokens[i,j],]$Latex_code
)
)
if (fils!=0){
fillers<-matrix(nrow=fils,ncol=n)
for (i in c(1:fils))
fillers[i,]<-as.character(sample(df[df$type_no==i+n&df$token_no==c(1:n),]$Latex_code))
lists<-rbind(lists, fillers)
}
# Randomize within block
for (i in c(1:ncol(lists)))
lists[,i]<-sample(lists[,i])
# Randomize block order
lists<-lists[,sample(colnames(lists))]
}
n=4
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
if (fname=="regular-focus") {
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
# The list of lists of experimental items
# The first list of items
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
# The second list of items
lists2<-matrix(nrow=n,ncol=n)
colnames(lists2)<-paste("l",c(5:8),sep="")
tokens2<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens2[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists2[i,j]<-(
as.character(
df2[df2$type_no==i+4&df2$token_no==tokens2[i,j],]$Latex_code
)
)
# The third list of items, fillers
lists3<-matrix(nrow=2,ncol=4)
colnames(lists3)<-paste("l",c(9:12),sep="")
tokens3<-matrix(nrow=2,ncol=n,c(1:2))
for (i in c(1:2))
for (j in c(1:4))
lists3[i,j]<-(
as.character(
df3[df3$type_no==j+8&df3$token_no==tokens3[i,j],]$Latex_code
)
)
# Roll the list randomly
ran=sample(2,1)
lists3[ran,]<-roll(lists3[ran,], sample(c(1:3),1))
lists1<-lists1[,sample(colnames(lists1))]
lists2<-lists2[,sample(colnames(lists2))]
lists3<-lists3[,sample(colnames(lists3))]
lists<-rbind(lists1,lists2,lists3)
for (i in c(1:ncol(lists)))
lists[,i]<-sample(lists[,i])
} else {
lists<-matrix(nrow=n,ncol=n)
colnames(lists)<-paste("l",c(1:n),sep="")
tokens<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists[i,j]<-(
as.character(
df[df$type_no==i&df$token_no==tokens[i,j],]$Latex_code
)
)
if (fils!=0){
fillers<-matrix(nrow=fils,ncol=n)
for (i in c(1:fils))
fillers[i,]<-as.character(sample(df[df$type_no==i+n&df$token_no==c(1:n),]$Latex_code))
lists<-rbind(lists, fillers)
}
# Randomize within block
for (i in c(1:ncol(lists)))
lists[,i]<-sample(lists[,i])
# Randomize block order
lists<-lists[,sample(colnames(lists))]
}
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
lists1
df1
df2
n=4
fname="regular-focus"
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
df1
df2
df3
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
lists1
tokens
tokens1
df1[df1$type_no==1,]
df1[df1$type_no==1&token_no==1,]
n=4
fname="regular-focus"
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
df1[df1$type_no==1&df1$token_no==1,]
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
lists2<-matrix(nrow=n,ncol=n)
colnames(lists2)<-paste("l",c(5:8),sep="")
tokens2<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens2[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists2[i,j]<-(
as.character(
df2[df2$type_no==i+4&df2$token_no==tokens2[i,j],]$Latex_code
)
)
df2
df2
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df2<-df[df$type_no>=5 & df$type_no<=8,]
df2
df
df
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
lists1<-matrix(nrow=n,ncol=n)
colnames(lists1)<-paste("l",c(1:n),sep="")
tokens1<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens1[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists1[i,j]<-(
as.character(
df1[df1$type_no==i&df1$token_no==tokens1[i,j],]$Latex_code
)
)
lists2<-matrix(nrow=n,ncol=n)
colnames(lists2)<-paste("l",c(5:8),sep="")
tokens2<-matrix(nrow=n,ncol=n)
for(i in c(1:n))
tokens2[,i]<-roll(c(1:n),i-1)
for (i in c(1:n))
for (j in c(1:n))
lists2[i,j]<-(
as.character(
df2[df2$type_no==i+4&df2$token_no==tokens2[i,j],]$Latex_code
)
)
lists3<-matrix(nrow=2,ncol=4)
colnames(lists3)<-paste("l",c(9:12),sep="")
tokens3<-matrix(nrow=2,ncol=n,c(1:2))
for (i in c(1:2))
for (j in c(1:4))
lists3[i,j]<-(
as.character(
df3[df3$type_no==j+8&df3$token_no==tokens3[i,j],]$Latex_code
)
)
df<-read.csv(paste("~/Dropbox/umass/gps/gp-two/exp2/", fname, ".csv", sep=""))
df1<-df[df$type_no>=1 & df$type_no<=4,]
df2<-df[df$type_no>=5 & df$type_no<=8,]
df3<-df[df$type_no>=9,]
df1
df2
df3
genrandom("regular-focus",4,0)
genrandom("ec-focus")
genrandom("ec-focus",6,0)
df
genrandom("pragmatics",4,1)
setwd("/home/zined/Dropbox/umass/coursework/2017-611/final/results/")
library(plyr)
list1_raw<-read.table("/home/zined/Dropbox/umass/coursework/2017-611/final/results/list1.txt", sep=",",
col.names=c("subject","md5","controller","item_no","elem_no","item_type","group","sth","answer","correct","RT"),
colClasses=c(rep("factor", 8), "character", "factor", "numeric"),
fill=T, quote = "")
list2_raw<-read.table("/home/zined/Dropbox/umass/coursework/2017-611/final/results/list2.txt", sep=",",
col.names=c("subject","md5","controller","item_no","elem_no","item_type","group","sth","answer","correct","RT"),
colClasses=c(rep("factor", 8), "character", "factor", "numeric"),
fill=T, quote = "")
# Add column indicating which list the data comes from
list1_raw$list=as.factor("A")
list2_raw$list=as.factor("B")
# Merge the two data files
l=rbind(list1_raw,list2_raw)
# Remove Turkish characters
l[l$answer=="sanıyor",]$answer="saniyor"
l[l$answer=="düşünüyor",]$answer="dusunuyor"
l[l$answer=="hatırlıyor",]$answer="hatirliyor"
l[l$answer=="özledi",]$answer="ozledi"
l[l$answer=="gördü",]$answer="gordu"
# Columns to keep
keep=c("subject","item_no","item_type","answer","RT","list")
l=subset(l, select=keep)
l$speaker="do"
l[l$item_no%in%c(13,14,15),]$speaker="ikb"
l[l$item_no%in%c(16,17,18),]$speaker="de"
# Subsetting into conditions
# Practice items
lp=subset(l, item_type=="p")
# Experimental items
le=droplevels(subset(l, item_type=="e"))
#le$item_no<-factor(le$item_no,seq(7,18))
#le[le$list=="A",]$item_no=le[le$list=="A",]$item_no+1
#levels(le$item_no)=seq(7,18)
# List of factive sentences per list
fsl1=c(7,9,11,13,15,17)
fsl2=c(8,10,12,14,16,18)
le$condition=NA
le[le$list=="A"&le$item_no%in%fsl1,]$condition="f"
le[le$list=="A"&!(le$item_no%in%fsl1),]$condition="nf"
le[le$list=="B"&le$item_no%in%fsl2,]$condition="f"
le[le$list=="B"&!(le$item_no%in%fsl2),]$condition="nf"
le$vchoice=NA
le[le$answer=="saniyor"|le$answer=="biliyor",]$vchoice="sb"
le[le$answer=="hatirliyor"|le$answer=="dusunuyor",]$vchoice="dh"
le$answer_type=NA
le[le$answer=="biliyor"|le$answer=="hatirliyor",]$answer_type=1
le[le$answer=="dusunuyor"|le$answer=="saniyor",]$answer_type=0
le$item_no=factor(le$item_no,seq(from=7,to=18))
lea=droplevels(subset(le,le$list=="A"))
leb=droplevels(subset(le,le$list=="B"))
lea_r=xtabs(lea$answer_type~lea$item_no)
leb_r=xtabs(leb$answer_type~leb$item_no)
pl=table(seq(1:24))
j=1
k=1
for (i in seq(from=1,to=2*length(lea_r),by=2)){
pl[i]=lea_r[j]/19
j=j+1
}
for (i in seq(from=2,to=2*length(leb_r),by=2)){
pl[i]=leb_r[k]/18
k=k+1
}
#pl=data.frame(pl)
xa=c("7f","7","8nf","8f","9f","9nf","10nf","10f","11f","11nf","12nf","12f",
"13f","13nf","14nf","14f","15f","15nf","16nf","16f","17f","17nf","18nf","18f")
plot(pl, xaxt="n", col=c("blue","red","red","blue"))
axis(side=1,at=1:24,labels=xa)
# Fillers
lf=droplevels(subset(l, item_type=="f"))
lf$item_type="poss"
# item numbers 19--24 are possessive examples; from 25--28 attitude report examples
att_exx=c(25,26,27,28)
lf[lf$item_no%in%att_exx,]$item_type="att"
lf$vchoice="go"
lf[lf$answer=="fark etti"|lf$answer=="unuttu",]$vchoice="fu"
lf$answer_type=0
# gordu and fark etti are coded as 1
lf[lf$answer=="gordu"|lf$answer=="fark etti",]$answer_type=1
lf_table=xtabs(lf$answer_type~lf$vchoice+lf$item_type)
lf_table[,1]=lf_table[,1]/(4*35) # Four att report items had farket- vs. unut-
lf_table[1,2]=lf_table[1,2]/35 # 1 possessive item had farket- vs. unut-
lf_table[2,2]=lf_table[2,2]/(5*35) # 5 possessive items had gor- vs. ozle-
# There is a bias for gordu over ozledi and fark etti over unuttu.
# Neg raising items
ln=droplevels(subset(l, item_type=="n"))
# Code: "low negation" as 1
ln$answer_type=0
ln[ln$answer=="Başkanın düşüncesi 'ortak bir karara varmak zor olmayacak' şeklinde."|ln$answer=="Ayşe'nin düşüncesi 'yağmur yağmıyor' şeklinde.",]$answer_type=1
# We could take the mean answer per participant.
ln_wide=xtabs(ln$answer_type~ln$subject+ln$item_no)
ln_wide=xtabs(ln$answer_type~ln$item_no+ln$subject)
# If we toss a fair coin 35 times, what is the probability of observing heads k times?
# Comprehension items
lc=droplevels(subset(l, item_type=="c"))
lc$condition=NA
lc[lc$list=="A"&lc$item_no=="35",]$condition="nf"
lc[lc$list=="A"&lc$item_no=="36",]$condition="f"
lc[lc$list=="B"&lc$item_no=="35",]$condition="f"
lc[lc$list=="B"&lc$item_no=="36",]$condition="nf"
lc$answer_type=0
lc[lc$answer=="Öğretmen Paris'te yaşamış."|lc$answer=="Referandumu yüzde yüzle kazanmış.",]$answer_type=1
# Proportion of factive vs. non-factive responses in each condition, in list A, B and pooled
lca=droplevels(subset(lc,lc$list=="A"))
lca_results=xtabs(lca$answer_type/19~lca$condition)
lcb=droplevels(subset(lc,lc$list=="B"))
lcb_results=xtabs(lcb$answer_type/16~lcb$condition)
lc_results=xtabs(lc$answer_type/35~lc$condition)
# Is there a difference between the two items?
lc_item_results=xtabs(lc$answer_type~lc$item_no+lc$list)
lc_item_results[,1]=lc_item_results[,1]/19
lc_item_results[,2]=lc_item_results[,2]/16
summary(list1_raw)
head(list1_raw)
head(list1_raw[list1_raw$sth=="anadil",])
summary(list1_raw[list1_raw$sth=="anadil",])
summary(list1_raw[list1_raw$sth=="anadil",]$answer)
list1_raw[list1_raw$sth=="anadil",]$answer=="yes"
list2_raw[list2_raw$sth=="anadil",]$answer=="yes"
head(list1_raw)
list2_raw[list2_raw$sth=="age",]
list2_raw[list2_raw$sth=="age",]$answer
append(list2_raw[list2_raw$sth=="age",]$answer, list1_raw[list1_raw$sth=="age",]$answer)
ages=append(list2_raw[list2_raw$sth=="age",]$answer, list1_raw[list1_raw$sth=="age",]$answer)
min(ages)
max(ages)
mean(ages)
mean(as.numeric(ages))
median(as.numeric(ages))
ages1=list1_raw[list1_raw$sth=="age",]$answer
ages2=list2_raw[list2_raw$sth=="age",]$answer
summary(as.numeric(ages1))
summary(as.numeric(ages2))
head(l)
nrow(l[l$subject])
nrow(l[l$subject="1496595599
",])
nrow(l[l$subject="1496595599",])
nrow(l[l$subject=1496595599,])
nrow(l[l$subject=="1496595599",])
head(l)
head(l,8)
nrow(le[le$subject=="1496595599
",])
nrow(le[le$subject=="1496595599",])
nrow(lc[lc$subject=="1496595599",])
nrow(ln[ln$subject=="1496595599",])
nrow(lf[lf$subject=="1496595599",])
nrow(lp[lp$subject=="1496595599",])
nrow(l[l$subject])
nrow(l[l$subject=="1496595599",])
l[l$subject=="1496595599",]
